<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bi√™n T·∫≠p Kh√≥a H·ªçc | EduStack</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; }
        .sidebar-gradient { background: linear-gradient(180deg, #6366f1 0%, #a855f7 100%); }
        .ai-gradient { background: linear-gradient(135deg, #f5f3ff 0%, #ede9fe 100%); }
        .input-focus:focus { border-color: #6366f1; ring-color: #6366f1; outline: none; box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2); }
    </style>
</head>
<body class="flex min-h-screen">

<aside class="w-64 sidebar-gradient text-white flex flex-col shadow-xl sticky top-0 h-screen">
    <div class="p-6">
        <h2 class="text-2xl font-bold italic text-white">EduStack<span class="text-indigo-200">.</span>Inst</h2>
    </div>
    <nav class="flex-1 px-4 space-y-2">
        <a th:href="@{/instructor/dashboard}" class="flex items-center space-x-3 hover:bg-white/10 p-3 rounded-xl transition font-medium">
            <span>üè†</span> <span>B·∫£ng ƒëi·ªÅu khi·ªÉn</span>
        </a>
        <a th:href="@{/instructor/my-courses}" class="flex items-center space-x-3 bg-white/20 p-3 rounded-xl transition font-medium">
            <span>üìö</span> <span>Kh√≥a h·ªçc c·ªßa t√¥i</span>
        </a>
    </nav>
</aside>

<main class="flex-1">
    <header class="bg-white shadow-sm px-8 py-5 flex justify-between items-center sticky top-0 z-20">
        <div class="flex items-center space-x-3">
            <a th:href="@{/instructor/dashboard}" class="text-slate-400 hover:text-indigo-600 transition">‚Üê Dashboard</a>
            <span class="text-slate-300">/</span>
            <h1 class="text-xl font-bold text-slate-800">Bi√™n t·∫≠p kh√≥a h·ªçc</h1>
        </div>
        <div class="flex items-center space-x-2">
            <span class="text-xs font-bold bg-indigo-100 text-indigo-600 px-3 py-1 rounded-full uppercase">Ch·∫ø ƒë·ªô bi√™n t·∫≠p</span>
        </div>
    </header>

    <div class="max-w-5xl mx-auto p-8 space-y-8">

        <div th:if="${success}" class="flex items-center p-4 bg-emerald-50 border-l-4 border-emerald-500 rounded-r-xl text-emerald-700 shadow-sm animate-pulse">
            <span class="mr-3 text-xl">‚úì</span>
            <span class="font-bold" th:text="${success}">L∆∞u th√†nh c√¥ng!</span>
        </div>

        <div class="bg-white rounded-3xl shadow-sm border border-slate-100 overflow-hidden">
            <div class="p-6 border-b border-slate-50 bg-slate-50/50 flex items-center justify-between">
                <h2 class="font-extrabold text-slate-700 flex items-center italic">
                    <span class="w-8 h-8 bg-indigo-600 text-white rounded-lg flex items-center justify-center mr-3 not-italic shadow-lg shadow-indigo-100">1</span>
                    TH√îNG TIN KH√ìA H·ªåC
                </h2>
            </div>
            <form th:action="@{/instructor/save-course}" th:object="${course}" method="post" class="p-8 space-y-6">
                <input type="hidden" th:field="*{id}">

                <div class="space-y-2">
                    <label class="text-sm font-bold text-slate-700 ml-1">T√™n kh√≥a h·ªçc ch√≠nh th·ª©c</label>
                    <input type="text" th:field="*{title}" required placeholder="V√≠ d·ª•: L·∫≠p tr√¨nh Java Spring Boot Professional"
                           class="w-full px-5 py-3 rounded-xl border border-slate-200 input-focus transition-all text-slate-700 font-medium shadow-sm"/>
                </div>

                <div class="space-y-2">
                    <label class="text-sm font-bold text-slate-700 ml-1">M√¥ t·∫£ t·ªïng quan</label>
                    <textarea th:field="*{description}" rows="3" placeholder="Gi·ªõi thi·ªáu m·ª•c ti√™u v√† gi√° tr·ªã c·ªßa kh√≥a h·ªçc..."
                              class="w-full px-5 py-3 rounded-xl border border-slate-200 input-focus transition-all text-slate-700 shadow-sm"></textarea>
                </div>

                <div class="flex justify-end">
                    <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-8 py-3 rounded-xl shadow-lg shadow-indigo-200 transition-all active:scale-95 flex items-center">
                        <span class="mr-2">üíæ</span> L∆∞u thay ƒë·ªïi
                    </button>
                </div>
            </form>
        </div>

        <div class="bg-white rounded-3xl shadow-sm border border-slate-100 overflow-hidden" th:if="${course.id != null}">
            <div class="p-6 border-b border-slate-50 bg-slate-50/50 flex items-center justify-between">
                <h2 class="font-extrabold text-slate-700 flex items-center italic">
                    <span class="w-8 h-8 bg-purple-600 text-white rounded-lg flex items-center justify-center mr-3 not-italic shadow-lg shadow-purple-100">2</span>
                    B√ÄI GI·∫¢NG & NGU·ªíN D·ªÆ LI·ªÜU AI
                </h2>
                <span class="text-[10px] font-black text-purple-500 uppercase tracking-widest bg-purple-50 px-2 py-1 rounded">AI-Ready Content</span>
            </div>

            <div class="p-8">
                <div class="ai-gradient rounded-2xl p-6 border-2 border-dashed border-purple-200 mb-8">
                    <div class="flex items-start space-x-4 mb-6">
                        <div class="text-3xl">ü§ñ</div>
                        <div>
                            <h4 class="font-bold text-purple-900">Hu·∫•n luy·ªán tr√≠ tu·ªá nh√¢n t·∫°o</h4>
                            <p class="text-sm text-purple-700 leading-relaxed">N·ªôi dung b·∫°n nh·∫≠p d∆∞·ªõi ƒë√¢y s·∫Ω ƒë∆∞·ª£c <strong>AI qu√©t t·ª± ƒë·ªông</strong> ƒë·ªÉ t·∫°o b·ªô c√¢u h·ªèi tr·∫Øc nghi·ªám. H√£y nh·∫≠p vƒÉn b·∫£n chi ti·∫øt, v√≠ d·ª• v√† c√°c ƒë·ªãnh nghƒ©a quan tr·ªçng.</p>
                        </div>
                    </div>

                    <form th:action="@{/instructor/course/{id}/add-lesson(id=${course.id})}" method="post" class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="md:col-span-3 space-y-2">
                                <label class="text-xs font-bold text-purple-900 ml-1 uppercase tracking-wider">Ti√™u ƒë·ªÅ b√†i gi·∫£ng</label>
                                <input type="text" name="title" required placeholder="V√≠ d·ª•: B√†i 1 - Bi·∫øn v√† Ki·ªÉu d·ªØ li·ªáu trong Java"
                                       class="w-full px-4 py-3 rounded-xl border border-white focus:border-purple-400 outline-none transition-all shadow-sm"/>
                            </div>
                            <div class="space-y-2">
                                <label class="text-xs font-bold text-purple-900 ml-1 uppercase tracking-wider">Th·ª© t·ª±</label>
                                <input type="number" name="orderIndex" placeholder="Auto"
                                       class="w-full px-4 py-3 rounded-xl border border-white focus:border-purple-400 outline-none transition-all shadow-sm"/>
                            </div>
                        </div>

                        <div class="space-y-2">
                            <label class="text-xs font-bold text-purple-900 ml-1 uppercase tracking-wider italic">N·ªôi dung tri th·ª©c (Ngu·ªìn d·ªØ li·ªáu cho AI)</label>
                            <textarea name="content" rows="10" required
                                      placeholder="H√£y d√°n n·ªôi dung b√†i h·ªçc, ƒë·ªãnh nghƒ©a, c√¥ng th·ª©c ho·∫∑c t√†i li·ªáu PDF c·ªßa b·∫°n v√†o ƒë√¢y..."
                                      class="w-full px-5 py-4 rounded-2xl border border-white focus:border-purple-400 outline-none transition-all shadow-sm text-slate-700"></textarea>
                        </div>

                        <button type="submit" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-black py-4 rounded-xl shadow-xl shadow-purple-200 transition-all flex items-center justify-center space-x-2">
                            <span>üöÄ</span> <span>XU·∫§T B·∫¢N & C·∫¨P NH·∫¨T AI</span>
                        </button>
                    </form>
                </div>

                <div class="space-y-4">
                    <div class="flex items-center justify-between px-2">
                        <h3 class="font-bold text-slate-800 text-sm">C·∫•u tr√∫c b√†i gi·∫£ng hi·ªán t·∫°i:</h3>
                        <span class="text-xs text-slate-400" th:text="${#lists.size(course.lessons) + ' b√†i h·ªçc'}">0 b√†i h·ªçc</span>
                    </div>

                    <div th:if="${#lists.isEmpty(course.lessons)}" class="text-center py-10 bg-slate-50 rounded-2xl border border-dashed border-slate-200">
                        <p class="text-slate-400 italic text-sm">Ch∆∞a c√≥ b√†i h·ªçc n√†o ƒë∆∞·ª£c t·∫°o.</p>
                    </div>

                    <div class="grid grid-cols-1 gap-3">
                        <div th:each="lesson : ${course.lessons}" class="flex items-center justify-between bg-white border border-slate-100 p-4 rounded-2xl hover:border-indigo-300 hover:shadow-md transition group">
                            <div class="flex items-center space-x-4">
                                <div class="w-10 h-10 bg-indigo-50 text-indigo-600 rounded-xl flex items-center justify-center font-black text-xs" th:text="${lesson.orderIndex}">1</div>
                                <div>
                                    <h5 class="font-bold text-slate-700 group-hover:text-indigo-600 transition" th:text="${lesson.title}">T√™n b√†i h·ªçc</h5>
                                    <p class="text-[10px] text-slate-400 uppercase font-bold tracking-widest mt-1">Status: <span class="text-emerald-500">Synced to AI</span></p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button class="text-slate-400 hover:text-indigo-600 p-2 transition">‚öôÔ∏è</button>
                                <button class="text-slate-400 hover:text-red-500 p-2 transition">üóëÔ∏è</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
</body>
</html>